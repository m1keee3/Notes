## Prometheus

### Что это

- **Prometheus** — система мониторинга и **сбора метрик**.
    
- Он специально хорошо интегрируется с **контейнерными приложениями и Kubernetes**.
    
- Основная задача — собирать данные о состоянии приложений, ресурсов и сервисов.

### Как работает

1. **Scraping**: Prometheus периодически опрашивает «endpoint’ы» приложений и сервисов, которые экспонируют метрики в формате Prometheus.
    
2. **Хранение данных**: метрики сохраняются в собственной базе временных рядов.
    
3. **Алертинг**: можно настроить правила для оповещений (например, если CPU > 80% дольше 5 минут).

### Метрики

- Системные: CPU, RAM, дисковая активность.
    
- Приложенческие: количество запросов, время ответа, ошибки.
    
- Kubernetes: статус Pod’ов, количество реплик, использование ресурсов.

---

## Grafana

### Что это

- **Grafana** — инструмент для **визуализации метрик**.
    
- Он не собирает метрики сам, а подключается к источникам данных (Prometheus, Loki, ElasticSearch и др.).

### Возможности

- Строит **графики, дашборды, heatmap, диаграммы**.
    
- Поддерживает **alerting** на основе метрик.
    
- Можно делать дашборды для команд, с разными уровнями доступа.
    
- Очень удобен для **мониторинга Kubernetes**: можно видеть нагрузку на кластер, Pod’ы, сервисы, сеть и хранилище.

---

## Вместе: Prometheus + Grafana

- **Prometheus** собирает и хранит метрики.
    
- **Grafana** визуализирует эти метрики в понятные графики и панели.
    
- В Kubernetes часто разворачивают так:
    
    - Prometheus «scrape» метрики с Pod’ов и node-exporter.
        
    - Grafana подключается к Prometheus как datasource.
        
    - На дашборде отображаются CPU, RAM, статус Pod’ов, задержки сети и т.д.